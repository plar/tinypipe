@import "tailwindcss";

/* ── Self-hosted fonts ─────────────────────────────────────── */

@font-face {
  font-family: 'Outfit';
  font-style: normal;
  font-weight: 400 700;
  font-display: swap;
  src: url('/fonts/Outfit-Latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Outfit';
  font-style: normal;
  font-weight: 400 700;
  font-display: swap;
  src: url('/fonts/Outfit-LatinExt.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/JetBrainsMono-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('/fonts/JetBrainsMono-Medium.woff2') format('woff2');
}

/* ── Dark industrial theme tokens ──────────────────────────── */

@theme {
  /* Surfaces */
  --color-background: oklch(0.16 0.01 250);
  --color-foreground: oklch(0.92 0.01 250);
  --color-card: oklch(0.19 0.012 250);
  --color-card-foreground: oklch(0.92 0.01 250);
  --color-popover: oklch(0.21 0.012 250);
  --color-popover-foreground: oklch(0.92 0.01 250);

  /* Brand / primary */
  --color-primary: oklch(0.82 0.14 85);
  --color-primary-foreground: oklch(0.16 0.01 250);

  /* Secondary */
  --color-secondary: oklch(0.24 0.012 250);
  --color-secondary-foreground: oklch(0.82 0.01 250);

  /* Muted */
  --color-muted: oklch(0.22 0.01 250);
  --color-muted-foreground: oklch(0.58 0.01 250);

  /* Accent */
  --color-accent: oklch(0.26 0.015 250);
  --color-accent-foreground: oklch(0.92 0.01 250);

  /* Status — factory control panel colors */
  --color-success: oklch(0.72 0.19 155);
  --color-warning: oklch(0.82 0.14 85);
  --color-destructive: oklch(0.65 0.22 25);
  --color-destructive-foreground: oklch(0.98 0 0);
  --color-info: oklch(0.68 0.14 230);

  /* Borders & inputs */
  --color-border: oklch(0.28 0.012 250);
  --color-input: oklch(0.24 0.012 250);
  --color-ring: oklch(0.82 0.14 85);

  /* Radii */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;

  /* Fonts */
  --font-sans: 'Outfit', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, monospace;

  /* DAG node colors */
  --color-node-step: oklch(0.55 0.14 230);
  --color-node-switch: oklch(0.72 0.16 85);
  --color-node-map: oklch(0.68 0.18 155);
  --color-node-sub: oklch(0.65 0.14 300);
  --color-node-barrier: oklch(0.60 0.15 25);
  --color-node-streaming: oklch(0.70 0.16 55);
  --color-node-pseudo: oklch(0.72 0.19 155);
}

/* ── Base layer ────────────────────────────────────────────── */

@layer base {
  *,
  *::before,
  *::after {
    border-color: var(--color-border);
  }

  html {
    color-scheme: dark;
  }

  body {
    font-family: var(--font-sans);
    color: var(--color-foreground);
    background: var(--color-background);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  code, pre, .font-mono {
    font-family: var(--font-mono);
  }
}

/* ── Utility classes ───────────────────────────────────────── */

@layer utilities {
  /* Dot-grid background */
  .grid-bg {
    background-image: radial-gradient(circle, oklch(0.30 0.01 250) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  /* Scan-line overlay */
  .scanline {
    position: relative;
  }
  .scanline::after {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      oklch(0 0 0 / 0.03) 2px,
      oklch(0 0 0 / 0.03) 4px
    );
    pointer-events: none;
  }

  /* Status glow indicators */
  .glow-ok {
    box-shadow: 0 0 8px oklch(0.72 0.19 155 / 0.4), inset 0 0 4px oklch(0.72 0.19 155 / 0.1);
  }
  .glow-warn {
    box-shadow: 0 0 8px oklch(0.82 0.14 85 / 0.4), inset 0 0 4px oklch(0.82 0.14 85 / 0.1);
  }
  .glow-error {
    box-shadow: 0 0 8px oklch(0.65 0.22 25 / 0.4), inset 0 0 4px oklch(0.65 0.22 25 / 0.1);
  }

  /* Conveyor-belt edge animation */
  .edge-animate {
    stroke-dasharray: 8 4;
    animation: conveyor 1s linear infinite;
  }

  /* Ambient pulse for active indicators */
  .pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }
}

/* ── Keyframes ─────────────────────────────────────────────── */

@keyframes conveyor {
  to { stroke-dashoffset: -12; }
}

@keyframes pulse-glow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(16px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Route transition */
.route-enter-active {
  animation: fade-in 0.25s ease-out;
}
.route-leave-active {
  animation: fade-in 0.15s ease-in reverse;
}

/* Staggered reveal for grid children */
.stagger-reveal > * {
  animation: fade-in 0.3s ease-out both;
}
.stagger-reveal > *:nth-child(1) { animation-delay: 0ms; }
.stagger-reveal > *:nth-child(2) { animation-delay: 50ms; }
.stagger-reveal > *:nth-child(3) { animation-delay: 100ms; }
.stagger-reveal > *:nth-child(4) { animation-delay: 150ms; }
.stagger-reveal > *:nth-child(5) { animation-delay: 200ms; }
.stagger-reveal > *:nth-child(6) { animation-delay: 250ms; }
.stagger-reveal > *:nth-child(7) { animation-delay: 300ms; }
.stagger-reveal > *:nth-child(8) { animation-delay: 350ms; }
.stagger-reveal > *:nth-child(9) { animation-delay: 400ms; }

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: oklch(0.30 0.01 250);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: oklch(0.38 0.01 250);
}
